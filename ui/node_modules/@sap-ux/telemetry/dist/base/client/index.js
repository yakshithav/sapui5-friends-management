"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ClientFactory = void 0;
const tooling_telemetry_1 = require("../../tooling-telemetry");
const config_state_1 = require("../config-state");
/**
 * Factory to get telemetry client instance.
 */
class ClientFactory {
    static clientMap = new Map();
    /**
     * Get singleton instance of default telemetry client for Azure app insights.
     *
     * @returns Telemetry client for Azure app insights
     */
    static getTelemetryClient() {
        return ClientFactory.getTelemetryClientByClass(tooling_telemetry_1.ToolsSuiteTelemetryClient);
    }
    /**
     * Get singleton instance of telemetry client based on the generics type. Currently, we only support
     * telemetry client for Azure app insights.
     *
     * @param clientConstructor Class passed in as construtor function. Needs to be subclass of Client class
     * @returns Subclass of telemetry Client class
     */
    static getTelemetryClientByClass(clientConstructor) {
        let client = ClientFactory.clientMap.get(clientConstructor.name);
        if (client) {
            return client;
        }
        const ClientConstructor = clientConstructor;
        client = new ClientConstructor(config_state_1.TelemetrySettings.azureInstrumentationKey, config_state_1.TelemetrySettings.consumerModuleName, config_state_1.TelemetrySettings.consumerModuleVersion);
        ClientFactory.clientMap.set(clientConstructor.name, client);
        return client;
    }
}
exports.ClientFactory = ClientFactory;
//# sourceMappingURL=index.js.map