"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getMainServiceDataSource = getMainServiceDataSource;
exports.getODataSources = getODataSources;
/**
 * Get the main service data source name from manifest.json.
 *
 * @param manifest - Parsed manifest.json
 * @returns - data source name from manifest.json
 */
function getMainServiceDataSourceName(manifest) {
    const modelName = manifest['sap.ovp']?.globalFilterModel ?? '';
    return manifest['sap.ui5']?.models?.[modelName]?.dataSource;
}
/**
 * Get the main service data source entry from manifest.json.
 *
 * @param manifest - Parsed manifest.json
 * @returns - data source entry from manifest.json, parsed
 */
function getMainServiceDataSource(manifest) {
    let dataSource;
    const dataSourceName = getMainServiceDataSourceName(manifest);
    if (dataSourceName) {
        dataSource = manifest['sap.app'].dataSources?.[dataSourceName];
    }
    return dataSource;
}
/**
 * Get the data sources of type 'OData' from manifest.
 *
 * @param manifest - the parsed manifest.json
 * @param dataSourceType - optional to specify the type of OData sources to filter
 * @returns data sources of type 'OData'
 */
function getODataSources(manifest, dataSourceType = 'OData') {
    const result = {};
    const dataSources = manifest['sap.app']?.dataSources ?? {};
    for (const dataSource in dataSources) {
        if (dataSources[dataSource].uri && dataSources[dataSource].type === dataSourceType) {
            result[dataSource] = dataSources[dataSource];
        }
    }
    return result;
}
//# sourceMappingURL=app-info.js.map