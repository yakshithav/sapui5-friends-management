"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateMockserverConfig = generateMockserverConfig;
exports.removeMockserverConfig = removeMockserverConfig;
const mem_fs_1 = require("mem-fs");
const mem_fs_editor_1 = require("mem-fs-editor");
const package_json_1 = require("./package-json");
const ui5_mock_yaml_1 = require("./ui5-mock-yaml");
/**
 *  Add mockserver configuration to a UI5 application.
 *
 * @param basePath - the base path where the package.json and ui5.yaml is
 * @param data - configuration of the mockserver
 * @param fs - the memfs editor instance
 * @returns Promise<Editor> - memfs editor instance with updated files
 */
async function generateMockserverConfig(basePath, data, fs) {
    if (!fs) {
        fs = (0, mem_fs_editor_1.create)((0, mem_fs_1.create)());
    }
    if (!data.packageJsonConfig?.skip) {
        (0, package_json_1.enhancePackageJson)(fs, basePath, data.packageJsonConfig);
    }
    await (0, ui5_mock_yaml_1.enhanceYaml)(fs, basePath, data.webappPath, data.ui5MockYamlConfig);
    return fs;
}
/**
 * Remove mockserver configuration.
 *
 * @param basePath - the base path where the package.json and ui5.yaml is
 * @param fs - the memfs editor instance
 * @returns Promise<Editor> - memfs editor instance with updated files
 */
async function removeMockserverConfig(basePath, fs) {
    if (!fs) {
        fs = (0, mem_fs_editor_1.create)((0, mem_fs_1.create)());
    }
    (0, package_json_1.removeFromPackageJson)(fs, basePath);
    (0, ui5_mock_yaml_1.removeUi5MockYaml)(fs, basePath);
    await (0, ui5_mock_yaml_1.removeMockDataFolders)(fs, basePath);
    return fs;
}
//# sourceMappingURL=index.js.map