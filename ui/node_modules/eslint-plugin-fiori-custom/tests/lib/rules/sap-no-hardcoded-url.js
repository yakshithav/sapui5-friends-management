/**
 * @fileoverview Tests for no-hardcoded-url rule.
 * @author Achref Kilani Jrad - C5215143
 */

// ------------------------------------------------------------------------------
// Invoking global form of strict mode syntax for whole script
// ------------------------------------------------------------------------------
"use strict";

//------------------------------------------------------------------------------
// Requirements
//------------------------------------------------------------------------------

var rule = require("../../../lib/rules/sap-no-hardcoded-url.js"),

    RuleTester = require("eslint").RuleTester;


//------------------------------------------------------------------------------
// Tests
//------------------------------------------------------------------------------

var ruleTester = new RuleTester();
var errorMessage = "Hardcoded (non relative) URL found.";
ruleTester.run("sap-no-hardcoded-url", rule,
                {
                    valid: [
                            "document.createElementNS('http://www.w3.org/2000/svg', 'line')",
                            "constantsTx1['SAP_NAMESPACE'] = 'http://www.sap.com/Protocols/SAPData'",
                            "'http://localhost/offline/my_contacts/ContactCollection(contactID='",
                            "var x = 4"
                    ],
                    invalid: [
                            {
                                code: "var system = 'https://uxciebj.example.net:44315'; // EBJ",
                                errors: [
                                    {
                                        message: errorMessage,
                                        type: "Literal"
                                    }
                                ]
                            },
                            {
                                code: "var url_root = 'https://'+ host + '/sap/opu/odata/sap/';",
                                errors: [
                                    {
                                        message: errorMessage,
                                        type: "Literal"
                                    }
                                ]
                            },
                            {
                                code: "system = 'https://ldciqi3.example.net:44375';",
                                errors: [
                                    {
                                        message: errorMessage,
                                        type: "Literal"
                                    }
                                ]
                            }
                    ]
                });
