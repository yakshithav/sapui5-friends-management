/**
 * @fileoverview Detect the usage of window.define window.top and window.groupBy
 * @author Christopher Fenner (C5224075) - 02/2016
 */
"use strict";

//------------------------------------------------------------------------------
// Requirements
//------------------------------------------------------------------------------

var rule = require("../../../lib/rules/sap-no-global-define.js"),

    RuleTester = require("eslint").RuleTester;


//------------------------------------------------------------------------------
// Tests
//------------------------------------------------------------------------------

var ruleTester = new RuleTester();
var errorMessage = "Definition of global variable/api in window object is not permitted.";
ruleTester.run("sap-no-global-define", rule,              
                {
                    valid: [
                        "window.location.myObject = {};"
                    ],
                    invalid: [
                            {
                                code: "var w = window, f = window; f.myObject = {};",
                                errors: [
                                    {
                                        message: errorMessage,
                                        type: "AssignmentExpression"
                                    }
                                ]
                            },
                            {
                                code: "var w = window; w['myObject'] = {};",
                                errors: [
                                    {
                                        message: errorMessage,
                                        type: "AssignmentExpression"
                                    }
                                ]
                            },
                            {
                                code: "var w = window; var key = 'myObject'; w[key] = {};",
                                errors: [
                                    {
                                        message: errorMessage,
                                        type: "AssignmentExpression"
                                    }
                                ]
                            }
                    ]
                });
