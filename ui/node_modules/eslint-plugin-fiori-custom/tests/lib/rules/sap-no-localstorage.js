/**
 * @fileoverview detects usage of localstaorage
 * @author Achref Kilani Jrad
 * @ESLint			Version 0.14.0 / February 2015
 */

// ------------------------------------------------------------------------------
// Invoking global form of strict mode syntax for whole script
// ------------------------------------------------------------------------------

"use strict";

//------------------------------------------------------------------------------
// Requirements
//------------------------------------------------------------------------------

var rule = require("../../../lib/rules/sap-no-localstorage.js"),

    RuleTester = require("eslint").RuleTester;


//------------------------------------------------------------------------------
// Tests
//------------------------------------------------------------------------------

var ruleTester = new RuleTester();
var errorMessage = "Local storage must not be used in a Fiori application";
ruleTester.run("sap-no-localstorage", rule, 
				{

					valid: [

					"localStorageABC.setObj(this.SETTINGS_NAME, this.objSettings);" ],

					invalid: [
							{
								code: "localStorage.setObj(this.SETTINGS_NAME, this.objSettings);",
								errors: [ {
									message: errorMessage,
									type: "MemberExpression"
								} ]
							},
							{
								code: "var abc = localStorage;abc.setObj(this.SETTINGS_NAME, this.objSettings);",
								errors: [ {
									message: errorMessage,
									type: "MemberExpression"
								} ]
							},
							{
								code: "var abc = window.localStorage;abc.setObj(this.SETTINGS_NAME, this.objSettings);",
								errors: [ {
									message: errorMessage,
									type: "MemberExpression"
								} ]
							} ]
				});
