/**
 * @fileoverview Rule to flag override of getters, setters, onBeforeRendering and onAfterRendering for SAPUI5 object from a list of namespaces
 * @author Achref Kilani Jrad
 * @ESLint			Version 0.14.0 / February 2015
 */

// ------------------------------------------------------------------------------
// Invoking global form of strict mode syntax for whole script
// ------------------------------------------------------------------------------
"use strict";

//------------------------------------------------------------------------------
// Requirements
//------------------------------------------------------------------------------

var rule = require("../../../lib/rules/sap-no-override-rendering.js"),

    RuleTester = require("eslint").RuleTester;


//------------------------------------------------------------------------------
// Tests
//------------------------------------------------------------------------------

var ruleTester = new RuleTester();
var errorMessage = "Override of rendering or getter or setter is not permitted";
ruleTester.run("sap-no-override-rendering", rule, 
                {

                    valid: [

                            "var issueModel = new sap.ui.model.json.JSONModel();issueModel.setProperty('/SalesOrder',salesOrderFulfillmentIssueQuery.oData.SalesOrder);",
                            "var issueModel = new sap.ui.model.json.JSONModel();issueModel.something.onAfterRendering = function render(){foo.bar = 1;};",
                            "var oButton5 = new sap.mX.Button(); oButton5.setMe = function render(){foo.bar = 1;}"
                    ],

                    invalid: [
                        {
                            code: "var oButton5 = new sap.me.foo.bar.Button();"
                                    + "oButton5.onAfterRendering = function render(){foo.bar = 1;};",
                            options: [
                                    {
                                        "ns": [
                                                "sap.ca.ui", "sap.m",
                                                "sap.makit", "sap.me",
                                                "sap.ndc", "sap.ui",
                                                "sap.uiext", "sap.viz",
                                                "sap.suite.ui", "sap.ushell"
                                        ]
                                    }
                            ],
                            errors: [
                                {
                                    message: errorMessage,
                                    type: "AssignmentExpression"
                                }
                            ]
                        },
                        {
                            code: "var oButton = new sap.m.Button();"
                                    + "oButton.getMe = function render(){foo.bar = 1;};",
                            errors: [
                                {
                                    message: errorMessage,
                                    type: "AssignmentExpression"
                                }
                            ]
                        },
                        {
                            code: "var oButton = new sap.m.Button();"
                                    + "oButton.setme = function render(){foo.bar = 1;};",
                            errors: [
                                {
                                    message: errorMessage,
                                    type: "AssignmentExpression"
                                }
                            ]
                        }
                    ]
                });
