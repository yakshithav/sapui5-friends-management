/**
 * @fileoverview Detect the usage of window.define window.top and window.groupBy
 * @author Christopher Fenner (C5224075) - 02/2016
 */
"use strict";



//------------------------------------------------------------------------------
// Requirements
//------------------------------------------------------------------------------

var rule = require("../../../lib/rules/sap-forbidden-window-property.js"),

    RuleTester = require("eslint").RuleTester;
    var MSG = "Usage of a forbidden window property.";


//------------------------------------------------------------------------------
// Tests
//------------------------------------------------------------------------------

var ruleTester = new RuleTester();
ruleTester.run("sap-forbidden-window-property", rule,              
                {
                    valid: [
                            "var test = window.location;",
                            // false negatives
                            "var fenster = window; var key = 'top'; var x = fenster[key];"
                    ],
                    invalid: [
                            {
                                code: "var top = window.top;",
                                errors: [
                                    {
                                        message: MSG,
                                        type: "MemberExpression"
                                    }
                                ]
                            },
                            {
                                code: "var fenster = window, tuer = window; var x = tuer['top'];",
                                errors: [
                                    {
                                        message: MSG,
                                        type: "MemberExpression"
                                    }
                                ]
                            }, {
                                code: "window.addEventListener();",
                                errors: [
                                    {
                                        message: MSG,
                                        type: "MemberExpression"
                                    }
                                ]
                            }
                    ]
                });
